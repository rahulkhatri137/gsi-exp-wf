name: Jar

on: [push]

env:
  URL: https://mirror.rahul137.workers.dev/framework-res.apk
  ZIP : Fluid-S.zip
  TZ: Asia/Kolkata
jobs:
  Framework:
    runs-on: ubuntu-18.04

    steps:
       - name: Checkout
         uses: actions/checkout@master
           
       - name: Initializing environment
         run: |
            sudo -E apt-get -qq update
            sudo -E apt-get -qq install git openjdk-8-jdk aria2 expect
       
       - name: Download
         run: |
            ls ; cd jar

       - name: Extract
         run: |
            cd jar
            java -jar jd-cli.jar services.jar
            unzip services.src.jar ; ls ; jar xf services.src.jar ; cd services.src ; ls
            
       - name: Update values
         run: |
            cd frm
            mv 

       - name: Repack
         run: |
            cd bb

       - name: Upload
         run: |
            cd ./framework/framework-res/dist ; ls 
            expect -c " 
            spawn sftp ${{ secrets.SFUSER }}@frs.sourceforge.net
            expect \"yes/no\"
            send \"yes\r\"
            expect \"Password\"        
            send \"${{ secrets.SFPASS }}\r\"
            expect \"sftp> \"
            send \"cd ${{ secrets.SFDIR }}\r\"
            set timeout -1
            send \"put *.apk\r\"
            expect \"Uploading\"
            expect \"100%\"
            expect \"sftp>\"
            send \"bye\r\"
            interact"
